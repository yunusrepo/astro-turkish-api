<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>AstroVogue</title>
    <meta name="description" content="Your daily cosmic style guide. Personalized fashion and beauty tips from your birth chart." />
    <link rel="icon" href="/favicon.svg" />
    <style>
      :root{
        --paper:#faf7f2; --paper2:#ffffff; --ink:#0b0b0b; --muted:#6b6b6b;
        --line:#e7e2da; --panel:#ffffff; --accent:#bfa980; --accent2:#6b5b95;
        --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.06);
      }
      *{box-sizing:border-box}
      body{
        margin:0; color:var(--ink);
        background:linear-gradient(180deg,var(--paper),var(--paper2) 25%,var(--paper) 100%);
        font:16px/1.6 -apple-system,BlinkMacSystemFont,"Inter","Segoe UI",Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;
        letter-spacing:.2px;
      }
      .wrap{max-width:1100px; margin:0 auto; padding:24px 16px 64px}
      header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px}
      .brand{display:flex; align-items:center; gap:12px}
      .logo{width:36px; height:36px; border-radius:10px; background:var(--ink); display:grid; place-items:center; color:#fff; font-weight:700}
      .title{font:600 18px/1 "Georgia","Times New Roman",serif; letter-spacing:.5px}
      .langbar{display:flex; gap:8px; align-items:center}
      .langpill{
        font:600 12px/1 "Inter",system-ui,sans-serif; letter-spacing:.5px; padding:8px 10px;
        border:1px solid var(--line); border-radius:999px; background:#fff; color:var(--ink);
        cursor:pointer; user-select:none; transition:transform .06s ease
      }
      .langpill:hover{transform:translateY(-1px)}
      .langpill.is-active{background:var(--ink); color:#fff; border-color:var(--ink)}
      .hero{
        position:relative; overflow:hidden; border-radius:18px;
        padding:28px; background:radial-gradient(1200px 300px at 70% -100%, #dcd3ff 0%, transparent 60%), linear-gradient(180deg, #fff 0%, #faf7f2 100%);
        border:1px solid var(--line); box-shadow:var(--shadow); margin-bottom:18px
      }
      .hero h1{margin:0 0 10px 0; font:700 44px/1.1 "Georgia","Times New Roman",serif; letter-spacing:.2px}
      .hero p{margin:0 0 18px 0; color:var(--muted)}
      .cta-row{display:flex; gap:10px; flex-wrap:wrap}
      .btn{appearance:none; border:1px solid var(--line); padding:12px 16px; border-radius:999px; cursor:pointer; font-weight:600}
      .btn--brand{background:var(--ink); color:#fff; border-color:var(--ink)}
      .btn--ghost{background:#fff}
      .btn--accent{background:var(--accent); color:#fff; border-color:var(--accent)}
      .stars{position:absolute; inset:0; pointer-events:none; background-image:radial-gradient(#cdbfff 1px, transparent 1px);}
      .stars{background-size:28px 28px; opacity:.25; animation:twinkle 6s linear infinite}
      @keyframes twinkle{0%{opacity:.18} 50%{opacity:.3} 100%{opacity:.18}}
      .gridA{display:grid; grid-template-columns:1fr 1fr; gap:18px; margin-top:16px}
      @media (max-width:900px){ .gridA{grid-template-columns:1fr} }
      .panel{background:var(--panel); border-radius:var(--radius); box-shadow:var(--shadow); border:1px solid var(--line)}
      .card{padding:18px}
      .label{font-size:13px; color:var(--muted); margin-bottom:6px}
      select{appearance:none; border:1px solid var(--line); background:#fff; color:var(--ink);
        border-radius:12px; padding:12px 14px; font:inherit; width:100%}
      .row{display:grid; grid-template-columns:1fr 1fr; gap:12px}
      .status{font-size:13px; color:var(--muted); padding-top:4px}
      .result{padding:18px; display:grid; gap:12px; min-height:120px}
      .result h3{margin:0 0 2px 0; font:600 20px/1.2 "Georgia","Times New Roman",serif}
      .kv{display:grid; grid-template-columns:150px 1fr; gap:6px; padding-top:4px}
      .muted{color:var(--muted)}
      .chip{display:inline-block; font-size:12px; color:#111; background:#f5f3ee; border:1px solid var(--line); padding:6px 10px; border-radius:999px}
      .divider{height:1px; background:var(--line); margin:6px 0 2px}
      .fade-in{animation:fade .2s ease both}
      @keyframes fade{from{opacity:0; transform:translateY(3px)} to{opacity:1; transform:none}}
      .how{display:grid; grid-template-columns:repeat(3,1fr); gap:14px; margin:22px 0}
      @media (max-width:900px){ .how{grid-template-columns:1fr} }
      .how .step{padding:16px; border-radius:14px; border:1px solid var(--line); background:#fff}
      .signs{margin-top:8px}
      .signs h2{font:600 24px/1.2 "Georgia","Times New Roman",serif; margin:0 0 10px 0}
      .cards{display:grid; grid-template-columns:repeat(4,1fr); gap:14px}
      @media (max-width:1100px){ .cards{grid-template-columns:repeat(3,1fr)} }
      @media (max-width:780px){ .cards{grid-template-columns:repeat(2,1fr)} }
      @media (max-width:480px){ .cards{grid-template-columns:1fr} }
      .card-mini{border:1px solid var(--line); border-radius:14px; padding:14px; background:#fff; display:grid; gap:6px}
      .badge{display:inline-flex; align-items:center; gap:6px; font-weight:600}
      .badge .icon{
        width:28px; height:28px; border-radius:999px; display:grid; place-items:center; color:#fff;
        background:linear-gradient(135deg,var(--accent2),#1f1b2e);
        font-size:11px; font-weight:600; letter-spacing:.5px; text-transform:uppercase;
      }
      .mini-line{
        font-size:13px;
        color:var(--muted);
      }
      .mini-cta{font-size:13px; color:#1f1b2e; font-weight:600; cursor:pointer}
      .weekly{margin:20px 0; padding:20px; border:1px solid var(--line); border-radius:16px; background:#fff}
      .weekly h2{font:600 22px/1.2 "Georgia","Times New Roman",serif; margin:0 0 14px 0}
      .weekly-grid{display:grid; grid-template-columns:repeat(2,1fr); gap:14px}
      @media (max-width:780px){ .weekly-grid{grid-template-columns:1fr} }
      .weekly-card{padding:14px; border:1px solid var(--line); border-radius:12px; background:var(--paper)}
      .weekly-card h3{margin:0 0 6px 0; font-size:16px; font-weight:600}
      .weekly-card p{margin:0; font-size:14px; color:var(--muted)}
      
      /* Affiliate Links Section */
      .affiliate-section{
        margin-top:16px; padding:16px; border-radius:12px; 
        background:linear-gradient(135deg, #f8f6f3 0%, #ffffff 100%);
        border:1px solid var(--line);
      }
      .affiliate-header{
        font-size:14px; font-weight:600; color:var(--ink); 
        margin-bottom:12px; display:flex; align-items:center; gap:6px;
      }
      .affiliate-grid{
        display:grid; grid-template-columns:repeat(3,1fr); gap:10px;
      }
      @media (max-width:780px){ .affiliate-grid{grid-template-columns:1fr} }
      .affiliate-card{
        padding:12px; border-radius:10px; background:#fff; 
        border:1px solid var(--line); display:flex; flex-direction:column; gap:6px;
        transition:all .15s ease; cursor:pointer; text-decoration:none; color:inherit;
      }
      .affiliate-card:hover{
        transform:translateY(-2px); box-shadow:0 4px 12px rgba(0,0,0,.08);
        border-color:var(--accent);
      }
      .affiliate-card-title{
        font-size:13px; font-weight:600; color:var(--ink);
        display:flex; align-items:center; gap:6px;
      }
      .affiliate-card-desc{
        font-size:12px; color:var(--muted); line-height:1.4;
      }
      .affiliate-card-cta{
        font-size:12px; color:var(--accent2); font-weight:600;
        margin-top:4px; display:flex; align-items:center; gap:4px;
      }
      .affiliate-disclaimer{
        font-size:11px; color:var(--muted); margin-top:10px; 
        padding-top:10px; border-top:1px solid var(--line);
      }
      
      footer{margin-top:26px; color:var(--muted); font-size:13px; display:flex; justify-content:space-between; flex-wrap:wrap; gap:8px}
      a.clean{color:inherit; text-decoration:none; border-bottom:1px solid #ddd}
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <div class="brand">
          <div class="logo">AV</div>
          <div class="title">AstroVogue</div>
        </div>
        <nav class="langbar" aria-label="Language">
          <span class="langpill" data-lang="dk">DK</span>
          <span class="langpill is-active" data-lang="en">EN</span>
          <span class="langpill" data-lang="es">ES</span>
          <span class="langpill" data-lang="tr">TR</span>
        </nav>
      </header>

      <!-- HERO -->
      <section class="hero" id="hero">
        <div class="stars"></div>
        <h1 id="t.hero.head">Your Daily Cosmic Style Guide</h1>
        <p id="t.hero.tag">Personalized fashion and beauty insights from your birth chart. Discover your style and shop curated pieces.</p>
        <div class="cta-row">
          <button class="btn btn--brand" id="hero-cta-weekly"></button>
          <button class="btn btn--ghost" id="hero-cta-signs"></button>
        </div>
      </section>

      <!-- CONTROLS + FEATURED -->
      <section class="gridA">
        <div class="panel">
          <div class="card">
            <div class="label" id="t.controls.sunDay">Sun sign and day</div>
            <div class="row" style="margin-bottom:10px">
              <select id="sun"></select>
              <select id="day"></select>
            </div>
            <button id="go-daily" class="btn btn--brand" style="margin-bottom:10px" data-i18n="controls.btnDaily">Get daily reading</button>

            <div class="label" id="t.controls.rising">Rising (optional)</div>
            <div class="row" style="margin-bottom:10px">
              <select id="rising"></select>
              <div></div>
            </div>
            <button id="go-personal" class="btn btn--accent" data-i18n="controls.btnPersonal">Get personal guidance</button>

            <div id="status" class="status"></div>
          </div>
        </div>

        <div class="panel">
          <div class="result" id="featured">
            <h3 id="t.featured.title">Featured sign</h3>
            <p class="muted" id="t.featured.help">Today's highlight will appear here after sample content loads.</p>
          </div>
        </div>
      </section>

      <!-- HOW IT WORKS -->
      <section class="how" id="how">
        <div class="step">
          <strong id="t.how.h1">1. Pick your sign</strong>
          <p class="muted" id="t.how.p1">Or add your rising for a sharper read.</p>
        </div>
        <div class="step">
          <strong id="t.how.h2">2. Read and act</strong>
          <p class="muted" id="t.how.p2">Get mood, color and outfit vibes that fit the day.</p>
        </div>
        <div class="step">
          <strong id="t.how.h3">3. Shop your vibe</strong>
          <p class="muted" id="t.how.p3">Discover curated pieces that match your cosmic style.</p>
        </div>
      </section>

      <!-- WEEKLY FORECAST -->
      <section class="weekly" id="weekly">
        <h2 id="t.weekly.title">This Week's Cosmic Highlights</h2>
        <div id="weekly-content">
          <p class="muted" id="t.weekly.loading">Loading weekly forecast...</p>
        </div>
      </section>

      <!-- SAMPLE GRID -->
      <section class="signs" id="signs">
        <h2 id="t.grid.title">Today's Cosmic Style for Every Sign</h2>
        <div class="cards" id="sample-cards"></div>
      </section>

      <footer>
        <span>© AstroVogue</span>
        <span>
          <a class="clean" href="mailto:yunus.ergemen@outlook.com" id="t.footer.contact">Contact</a>
        </span>
      </footer>
    </div>

    <script>
      // i18n dictionary (all UI strings)
      const I18N = {
        en: {
          "hero.head": "Your Daily Cosmic Style Guide",
          "hero.tag": "Personalized fashion and beauty insights from your birth chart. Discover your style and shop curated pieces.",
          "hero.cta1": "Get My Cosmic Style Reading",
          "hero.ctaWeekly": "See this week's highlights",
          "hero.ctaSigns": "See today's style for all signs",
          "controls.sunDay": "Sun sign and day",
          "controls.rising": "Rising (optional)",
          "controls.btnDaily": "Get daily reading",
          "controls.btnPersonal": "Get personal guidance",
          "featured.title": "Featured sign",
          "featured.help": "Today's highlight will appear here after sample content loads.",
          "how.h1": "1. Pick your sign",
          "how.p1": "Or add your rising for a sharper read.",
          "how.h2": "2. Read and act",
          "how.p2": "Get mood, color and outfit vibes that fit the day.",
          "how.h3": "3. Shop your vibe",
          "how.p3": "Discover curated pieces that match your cosmic style.",
          "grid.title": "Today's Cosmic Style for Every Sign",
          "weekly.title": "This Week's Cosmic Highlights",
          "weekly.loading": "Loading weekly forecast...",
          "footer.contact": "Contact",
          "affiliate.header": "Shop Your Cosmic Style",
          "affiliate.fashion": "Fashion",
          "affiliate.fashionDesc": "Discover {color} outfits for {sign}",
          "affiliate.beauty": "Beauty",
          "affiliate.beautyDesc": "{color} makeup & beauty",
          "affiliate.jewelry": "Jewelry",
          "affiliate.jewelryDesc": "{sign} zodiac accessories",
          "affiliate.cta": "Explore",
          "affiliate.disclaimer": "We may earn a commission from purchases made through these links.",
          loading: "Loading…",
          selectSign: "Select a sign",
          readMore: "Read more",
          days: [{v:"today",t:"Today"},{v:"tomorrow",t:"Tomorrow"},{v:"yesterday",t:"Yesterday"}],
          signs: { aries:"Aries", taurus:"Taurus", gemini:"Gemini", cancer:"Cancer", leo:"Leo", virgo:"Virgo", libra:"Libra", scorpio:"Scorpio", sagittarius:"Sagittarius", capricorn:"Capricorn", aquarius:"Aquarius", pisces:"Pisces" },
          kv: { 
            compat: "Compatibility", mood: "Mood", color: "Color", 
            luckyNum: "Lucky number", luckyTime: "Lucky time", focus: "Focus",
            food: "Food", cocktail: "Cocktail", clothing: "Clothing",
            jewelry: "Jewelry", makeup: "Makeup",
            luckiest: "Luckiest Sign", wealthiest: "Wealthiest Sign", 
            successful: "Most Successful", fashionTrend: "Fashion Trend", 
            makeupTrend: "Makeup Trend"
          }
        },
        tr: {
          "hero.head": "Günlük Kozmik Stil Rehberin",
          "hero.tag": "Doğum haritandan kişisel moda ve güzellik içgörüleri. Stilini keşfet ve özenle seçilmiş parçaları al.",
          "hero.cta1": "Kozmik Stil Yorumumu Al",
          "hero.ctaWeekly": "Bu haftanın öne çıkanlarını gör",
          "hero.ctaSigns": "Tüm burçlar için bugünü gör",
          "controls.sunDay": "Güneş burcun ve gün",
          "controls.rising": "Yükselen (opsiyonel)",
          "controls.btnDaily": "Günlük yorumu getir",
          "controls.btnPersonal": "Kişisel rehberi getir",
          "featured.title": "Öne çıkan burç",
          "featured.help": "Öne çıkan günlük yorum örneği burada gözükecek.",
          "how.h1": "1. Burcunu seç",
          "how.p1": "Daha net bir okuma için yükseleni ekle.",
          "how.h2": "2. Oku ve uygula",
          "how.p2": "Güne uygun ruh, renk ve stil önerilerini al.",
          "how.h3": "3. Stilini al",
          "how.p3": "Kozmik stiline uygun parçaları keşfet.",
          "grid.title": "Bugün: Tüm burçlar için kozmik stil",
          "weekly.title": "Bu Haftanın Kozmik Öne Çıkanları",
          "weekly.loading": "Haftalık tahmin yükleniyor...",
          "footer.contact": "İletişim",
          "affiliate.header": "Kozmik Stilini Satın Al",
          "affiliate.fashion": "Moda",
          "affiliate.fashionDesc": "{sign} için {color} kıyafetler",
          "affiliate.beauty": "Güzellik",
          "affiliate.beautyDesc": "{color} makyaj & güzellik",
          "affiliate.jewelry": "Takı",
          "affiliate.jewelryDesc": "{sign} burç aksesuarları",
          "affiliate.cta": "Keşfet",
          "affiliate.disclaimer": "Bu linklerden yapılan alışverişlerden komisyon alabiliriz.",
          loading: "Yükleniyor…",
          selectSign: "Burç seç",
          readMore: "Devamını oku",
          days: [{v:"today",t:"Bugün"},{v:"tomorrow",t:"Yarın"},{v:"yesterday",t:"Dün"}],
          signs: { aries:"Koç", taurus:"Boğa", gemini:"İkizler", cancer:"Yengeç", leo:"Aslan", virgo:"Başak", libra:"Terazi", scorpio:"Akrep", sagittarius:"Yay", capricorn:"Oğlak", aquarius:"Kova", pisces:"Balık" },
          kv: { 
            compat:"Uyum", mood:"Ruh hali", color:"Renk", 
            luckyNum:"Şanslı sayı", luckyTime:"Şanslı saat", focus:"Odak",
            food: "Yemek", cocktail: "İçecek", clothing: "Giysi",
            jewelry: "Takı", makeup: "Makyaj",
            luckiest: "En Şanslı", wealthiest: "En Zengin", 
            successful: "En Başarılı", fashionTrend: "Moda Trendi", 
            makeupTrend: "Makyaj Trendi"
          }
        },
        es: {
          "hero.head": "Tu guía cósmica de estilo diaria",
          "hero.tag": "Consejos de moda y belleza basados en tu carta natal. Descubre tu estilo y compra piezas seleccionadas.",
          "hero.cta1": "Obtener mi lectura cósmica",
          "hero.ctaWeekly": "Ver los destacados de la semana",
          "hero.ctaSigns": "Ver el estilo de hoy para todos los signos",
          "controls.sunDay": "Signo solar y día",
          "controls.rising": "Ascendente (opcional)",
          "controls.btnDaily": "Leer del día",
          "controls.btnPersonal": "Guía personal",
          "featured.title": "Signo destacado",
          "featured.help": "El destacado aparecerá aquí tras cargar el contenido.",
          "how.h1": "1. Elige tu signo",
          "how.p1": "Añade tu ascendente para afinar la lectura.",
          "how.h2": "2. Lee y actúa",
          "how.p2": "Estado de ánimo, color y vibras de outfit del día.",
          "how.h3": "3. Compra tu vibra",
          "how.p3": "Descubre piezas que combinan con tu estilo cósmico.",
          "grid.title": "Estilo cósmico de hoy para cada signo",
          "weekly.title": "Destacados Cósmicos de esta Semana",
          "weekly.loading": "Cargando pronóstico semanal...",
          "footer.contact": "Contacto",
          "affiliate.header": "Compra tu Estilo Cósmico",
          "affiliate.fashion": "Moda",
          "affiliate.fashionDesc": "Outfits {color} para {sign}",
          "affiliate.beauty": "Belleza",
          "affiliate.beautyDesc": "Maquillaje {color}",
          "affiliate.jewelry": "Joyería",
          "affiliate.jewelryDesc": "Accesorios zodiacales {sign}",
          "affiliate.cta": "Explorar",
          "affiliate.disclaimer": "Podemos ganar una comisión por compras realizadas a través de estos enlaces.",
          loading: "Cargando…",
          selectSign: "Elige un signo",
          readMore: "Leer más",
          days: [{v:"today",t:"Hoy"},{v:"tomorrow",t:"Mañana"},{v:"yesterday",t:"Ayer"}],
          signs: { aries:"Aries", taurus:"Tauro", gemini:"Géminis", cancer:"Cáncer", leo:"Leo", virgo:"Virgo", libra:"Libra", scorpio:"Escorpio", sagittarius:"Sagitario", capricorn:"Capricornio", aquarius:"Acuario", pisces:"Piscis" },
          kv: { 
            compat:"Compatibilidad", mood:"Estado de ánimo", color:"Color", 
            luckyNum:"Número de la suerte", luckyTime:"Hora de la suerte", focus:"Enfoque",
            food: "Comida", cocktail: "Cóctel", clothing: "Ropa",
            jewelry: "Joyería", makeup: "Maquillaje",
            luckiest: "Más Afortunado", wealthiest: "Más Próspero", 
            successful: "Más Exitoso", fashionTrend: "Tendencia Moda", 
            makeupTrend: "Tendencia Makeup"
          }
        },
        dk: {
          "hero.head": "Din daglige kosmiske stilguide",
          "hero.tag": "Personlige mode- og beautyindsigter fra din fødselshoroskop. Opdag din stil og shop udvalgte styles.",
          "hero.cta1": "Få min kosmiske læsning",
          "hero.ctaWeekly": "Se ugens højdepunkter",
          "hero.ctaSigns": "Se dagens stil for alle tegn",
          "controls.sunDay": "Solsign og dag",
          "controls.rising": "Ascendant (valgfri)",
          "controls.btnDaily": "Hent dagens læsning",
          "controls.btnPersonal": "Hent personlig vejledning",
          "featured.title": "Fremhævet tegn",
          "featured.help": "Dagens fremhævede indhold vises her.",
          "how.h1": "1. Vælg dit tegn",
          "how.p1": "Tilføj ascendant for en skarpere læsning.",
          "how.h2": "2. Læs og handl",
          "how.p2": "Humør, farve og outfit-vibes til dagen.",
          "how.h3": "3. Shop din vibe",
          "how.p3": "Opdag styles der matcher din kosmiske stil.",
          "grid.title": "Dagens kosmiske stil for alle tegn",
          "weekly.title": "Ugens Kosmiske Højdepunkter",
          "weekly.loading": "Indlæser ugentlig prognose...",
          "footer.contact": "Kontakt",
          "affiliate.header": "Shop Din Kosmiske Stil",
          "affiliate.fashion": "Mode",
          "affiliate.fashionDesc": "{color} outfits til {sign}",
          "affiliate.beauty": "Beauty",
          "affiliate.beautyDesc": "{color} makeup & beauty",
          "affiliate.jewelry": "Smykker",
          "affiliate.jewelryDesc": "{sign} stjernetegn accessories",
          "affiliate.cta": "Udforsk",
          "affiliate.disclaimer": "Vi kan modtage kommission fra køb gennem disse links.",
          loading: "Indlæser…",
          selectSign: "Vælg et tegn",
          readMore: "Læs mere",
          days: [{v:"today",t:"I dag"},{v:"tomorrow",t:"I morgen"},{v:"yesterday",t:"I går"}],
          signs: { aries:"Vædder", taurus:"Tyr", gemini:"Tvilling", cancer:"Krebs", leo:"Løve", virgo:"Jomfru", libra:"Vægt", scorpio:"Skorpion", sagittarius:"Skytte", capricorn:"Stenbuk", aquarius:"Vandbærer", pisces:"Fisk" },
          kv: { 
            compat:"Kompatibilitet", mood:"Humør", color:"Farve", 
            luckyNum:"Lykketallet", luckyTime:"Lykketid", focus:"Fokus",
            food: "Mad", cocktail: "Cocktail", clothing: "Tøj",
            jewelry: "Smykker", makeup: "Makeup",
            luckiest: "Heldigste", wealthiest: "Rigeste", 
            successful: "Mest Succesfuld", fashionTrend: "Modetrend", 
            makeupTrend: "Makeup Trend"
          }
        }
      };

      // helpers
      const $ = sel => document.querySelector(sel);
      const $$ = sel => Array.from(document.querySelectorAll(sel));
      const SIGN_CODES = ["aries","taurus","gemini","cancer","leo","virgo","libra","scorpio","sagittarius","capricorn","aquarius","pisces"];

      // state
      let lang = "en";

      // elements
      const langPills = $$(".langpill");
      const sunSel = $("#sun"), risingSel = $("#rising"), daySel = $("#day");
      const statusEl = $("#status");
      const featured = $("#featured");
      const sampleCards = $("#sample-cards");
      const weeklyContent = $("#weekly-content");

      // i18n apply
      function t(key){ return I18N[lang][key] || key; }
      function setText(id, key){ const el = document.getElementById(id); if(el) el.textContent = t(key); }
      function setUI(){
        setText("t.hero.head","hero.head");
        setText("t.hero.tag","hero.tag");
        $("#hero-cta-weekly").textContent = t("hero.ctaWeekly");
        $("#hero-cta-signs").textContent = t("hero.ctaSigns");
        setText("t.controls.sunDay","controls.sunDay");
        setText("t.controls.rising","controls.rising");
        $("#go-daily").textContent = t("controls.btnDaily");
        $("#go-personal").textContent = t("controls.btnPersonal");
        setText("t.featured.title","featured.title");
        setText("t.featured.help","featured.help");
        setText("t.how.h1","how.h1"); setText("t.how.p1","how.p1");
        setText("t.how.h2","how.h2"); setText("t.how.p2","how.p2");
        setText("t.how.h3","how.h3"); setText("t.how.p3","how.p3");
        setText("t.grid.title","grid.title");
        setText("t.weekly.title","weekly.title");
        setText("t.weekly.loading","weekly.loading");
        setText("t.footer.contact","footer.contact");
      }

      function setActiveLangPill(){
        langPills.forEach(p=>p.classList.toggle("is-active", p.dataset.lang===lang));
      }

      function renderDayOptions(){
        daySel.innerHTML = "";
        I18N[lang].days.forEach(d=>{
          const o=document.createElement("option"); o.value=d.v; o.textContent=d.t; daySel.appendChild(o);
        });
      }
      function renderSignOptions(){
        const names = I18N[lang].signs;
        function fill(sel, none){
          sel.innerHTML = "";
          if(none){
            const n=document.createElement("option");
            n.value=""; n.textContent = lang==="en"?"None":lang==="tr"?"Seçim yok":lang==="es"?"Ninguno":"Ingen";
            sel.appendChild(n);
          }
          Object.entries(names).forEach(([code,label])=>{
            const o=document.createElement("option"); o.value=code; o.textContent=label; sel.appendChild(o);
          });
        }
        fill(sunSel,false);
        fill(risingSel,true);
      }
      function initLanguage(newLang){
        lang = newLang;
        setActiveLangPill();
        setUI();
        renderDayOptions();
        renderSignOptions();
        loadSamples();
        loadWeekly();
      }

      // init
      initLanguage("en");
      langPills.forEach(p=>p.addEventListener("click", ()=>{ if(p.dataset.lang!==lang) initLanguage(p.dataset.lang); }));

      // API helpers
      function showStatus(msg){ statusEl.textContent = msg || ""; }
      function signLabel(code){ return I18N[lang].signs[code] || code; }
      function kvLabel(k){ return I18N[lang].kv[k]; }

      $("#go-daily").addEventListener("click", fetchDaily);
      $("#go-personal").addEventListener("click", fetchPersonal);

      $("#hero-cta-weekly").addEventListener("click", () => {
        $("#weekly").scrollIntoView({ behavior: "smooth", block: "start" });
      });

      $("#hero-cta-signs").addEventListener("click", () => {
        $("#signs").scrollIntoView({ behavior: "smooth", block: "start" });
      });

      // Affiliate link generation
      // Fashion: color + clothing, Beauty: makeup, Jewelry: jewelry
      function generateAffiliateLinks(sign, data){
        const color    = data.color || "";
        const clothing = data.clothing_item || "";
        const makeup   = data.makeup_suggestion || "";
        const jewelry  = data.jewelry_item || "";

        const fashionQuery = [color, clothing].filter(Boolean).join(" ").trim() || color || clothing || "outfit";
        const beautyQuery  = makeup || color || "makeup";
        const jewelryQuery = jewelry || color || "zodiac jewelry";

        const q = s => encodeURIComponent((s || "").toLowerCase().trim());

        const links = {
          fashion: {
            en: `https://www.zalando.co.uk/catalog/?q=${q(fashionQuery)}`,
            tr: `https://www.trendyol.com/sr?q=${q(fashionQuery)}`,
            es: `https://www.zalando.es/catalogo/?q=${q(fashionQuery)}`,
            dk: `https://www.zalando.dk/katalog/?q=${q(fashionQuery)}`
          },
          beauty: {
            en: `https://www.sephora.com/search?keyword=${q(beautyQuery)}`,
            tr: `https://www.sephora.com.tr/ara?q=${q(beautyQuery)}`,
            es: `https://www.sephora.es/buscar/?q=${q(beautyQuery)}`,
            dk: `https://www.sephora.dk/sog/?q=${q(beautyQuery)}`
          },
          jewelry: {
            en: `https://www.etsy.com/search?q=${q(jewelryQuery)}`,
            tr: `https://www.etsy.com/search?q=${q(jewelryQuery)}`,
            es: `https://www.etsy.com/search?q=${q(jewelryQuery)}`,
            dk: `https://www.etsy.com/search?q=${q(jewelryQuery)}`
          }
        };

        return {
          fashion: links.fashion[lang] || links.fashion.en,
          beauty:  links.beauty[lang]  || links.beauty.en,
          jewelry: links.jewelry[lang] || links.jewelry.en
        };
      }

      function renderAffiliateSection(sign, data){
        const links    = generateAffiliateLinks(sign, data);
        const signName = signLabel(sign);
        const color    = data.color || "";

        return `
          <div class="affiliate-section fade-in">
            <div class="affiliate-header">${t('affiliate.header')}</div>
            <div class="affiliate-grid">
              <a href="${links.fashion}" target="_blank" rel="noopener noreferrer nofollow" class="affiliate-card">
                <div class="affiliate-card-title">${t('affiliate.fashion')}</div>
                <div class="affiliate-card-desc">${t('affiliate.fashionDesc').replace('{color}', color).replace('{sign}', signName)}</div>
                <div class="affiliate-card-cta">${t('affiliate.cta')}</div>
              </a>
              
              <a href="${links.beauty}" target="_blank" rel="noopener noreferrer nofollow" class="affiliate-card">
                <div class="affiliate-card-title">${t('affiliate.beauty')}</div>
                <div class="affiliate-card-desc">${t('affiliate.beautyDesc').replace('{color}', color).replace('{sign}', signName)}</div>
                <div class="affiliate-card-cta">${t('affiliate.cta')}</div>
              </a>
              
              <a href="${links.jewelry}" target="_blank" rel="noopener noreferrer nofollow" class="affiliate-card">
                <div class="affiliate-card-title">${t('affiliate.jewelry')}</div>
                <div class="affiliate-card-desc">${t('affiliate.jewelryDesc').replace('{color}', color).replace('{sign}', signName)}</div>
                <div class="affiliate-card-cta">${t('affiliate.cta')}</div>
              </a>
            </div>
            <div class="affiliate-disclaimer">${t('affiliate.disclaimer')}</div>
          </div>
        `;
      }

      async function fetchDaily(){
        const sign=sunSel.value, day=daySel.value;
        if(!sign){ showStatus(I18N[lang].selectSign); return; }
        showStatus(I18N[lang].loading);
        try{
          const base=window.location.origin;
          const r=await fetch(`${base}/api/daily?sign=${encodeURIComponent(sign)}&day=${encodeURIComponent(day)}&lang=${encodeURIComponent(lang)}`);
          const d=await r.json();
          renderFeaturedFromDaily(d, sign);
        }finally{ showStatus(""); }
      }

      async function fetchPersonal(){
        const sun=sunSel.value, rising=risingSel.value||"", day=daySel.value;
        if(!sun){ showStatus(I18N[lang].selectSign); return; }
        showStatus(I18N[lang].loading);
        try{
          const base=window.location.origin;
          const r=await fetch(`${base}/api/personalized`,{
            method:"POST", headers:{ "Content-Type":"application/json" },
            body: JSON.stringify({ sun, rising, day, lang })
          });
          const d=await r.json();
          renderFeaturedFromPersonal(d);
        }finally{ showStatus(""); }
      }

      function renderFeaturedFromDaily(d, code){
        featured.innerHTML = `
          <div class="fade-in">
            <h3>${signLabel(code)} | ${d.date}</h3>
            <p>${d.description||""}</p>
            <div class="kv">
              <div class="muted">${kvLabel("color")}</div><div><span class="chip">${d.color||"-"}</span></div>
              <div class="muted">${kvLabel("mood")}</div><div>${d.mood||"-"}</div>
              <div class="muted">${kvLabel("luckyNum")}</div><div>${d.lucky_number||"-"}</div>
              <div class="muted">${kvLabel("luckyTime")}</div><div>${d.lucky_time||"-"}</div>
            </div>
            ${d.food||d.cocktail||d.clothing_item||d.jewelry_item||d.makeup_suggestion ? `
              <div class="divider"></div>
              <div class="kv">
                ${d.food ? `<div class="muted">${kvLabel("food")}</div><div>${d.food}</div>` : ''}
                ${d.cocktail ? `<div class="muted">${kvLabel("cocktail")}</div><div>${d.cocktail}</div>` : ''}
                ${d.clothing_item ? `<div class="muted">${kvLabel("clothing")}</div><div>${d.clothing_item}</div>` : ''}
                ${d.jewelry_item ? `<div class="muted">${kvLabel("jewelry")}</div><div>${d.jewelry_item}</div>` : ''}
                ${d.makeup_suggestion ? `<div class="muted">${kvLabel("makeup")}</div><div>${d.makeup_suggestion}</div>` : ''}
              </div>
            ` : ''}
            <div class="divider"></div>
            <p>${[d.paragraph,d.fashion_tip].filter(Boolean).join(" ")}</p>
          </div>
          ${renderAffiliateSection(code, d)}
        `;
      }

      function renderFeaturedFromPersonal(d){
        const title = `${signLabel(d.sun)}${d.rising?" ↑ "+signLabel(d.rising):""} | ${d.date}`;
        featured.innerHTML = `
          <div class="fade-in">
            <h3>${title}</h3>
            <p>${d.summary||""}</p>
            <div class="kv">
              <div class="muted">${kvLabel("focus")}</div><div>${d.guidance?d.guidance.split(".")[0]:"-"}</div>
              <div class="muted">${kvLabel("mood")}</div><div>${d.mood||"-"}</div>
              <div class="muted">${kvLabel("color")}</div><div><span class="chip">${d.color||"-"}</span></div>
              <div class="muted">${kvLabel("compat")}</div><div>${d.compatibility||"-"}</div>
            </div>
            ${d.food||d.cocktail||d.clothing_item||d.jewelry_item||d.makeup_suggestion ? `
              <div class="divider"></div>
              <div class="kv">
                ${d.food ? `<div class="muted">${kvLabel("food")}</div><div>${d.food}</div>` : ''}
                ${d.cocktail ? `<div class="muted">${kvLabel("cocktail")}</div><div>${d.cocktail}</div>` : ''}
                ${d.clothing_item ? `<div class="muted">${kvLabel("clothing")}</div><div>${d.clothing_item}</div>` : ''}
                ${d.jewelry_item ? `<div class="muted">${kvLabel("jewelry")}</div><div>${d.jewelry_item}</div>` : ''}
                ${d.makeup_suggestion ? `<div class="muted">${kvLabel("makeup")}</div><div>${d.makeup_suggestion}</div>` : ''}
              </div>
            ` : ''}
            <div class="divider"></div>
            <p>${[d.paragraph,d.fashion_tip].filter(Boolean).join(" ")}</p>
          </div>
          ${renderAffiliateSection(d.sun, d)}
        `;
      }

      // Weekly forecast
      async function loadWeekly(){
        try{
          const base = window.location.origin;
          const r = await fetch(`${base}/api/weekly?lang=${lang}`);
          const d = await r.json();
          renderWeekly(d);
        }catch(e){
          console.error("Weekly load error:", e);
        }
      }

      function renderWeekly(d){
        weeklyContent.innerHTML = `
          <div class="weekly-grid fade-in">
            <div class="weekly-card">
              <h3>${kvLabel("luckiest")}: ${signLabel(d.luckiest_sign.toLowerCase())}</h3>
              <p>${d.luckiest_description||""}</p>
            </div>
            <div class="weekly-card">
              <h3>${kvLabel("wealthiest")}: ${signLabel(d.wealthiest_sign.toLowerCase())}</h3>
              <p>${d.wealthiest_description||""}</p>
            </div>
            <div class="weekly-card">
              <h3>${kvLabel("successful")}: ${signLabel(d.most_successful_sign.toLowerCase())}</h3>
              <p>${d.successful_description||""}</p>
            </div>
            <div class="weekly-card">
              <h3>${kvLabel("fashionTrend")}: ${d.fashion_trend||""}</h3>
              <p>${d.fashion_description||""}</p>
            </div>
            <div class="weekly-card">
              <h3>${kvLabel("makeupTrend")}: ${d.makeup_trend||""}</h3>
              <p>${d.makeup_description||""}</p>
            </div>
          </div>`;
      }

      // Sample grid
      async function loadSamples(){
        sampleCards.innerHTML = "";
        const base = window.location.origin;
        const results = await Promise.all(
          SIGN_CODES.map(code =>
            fetch(`${base}/api/daily?sign=${code}&day=today&lang=${lang}`)
              .then(r=>r.json()).then(d=>({code,d})).catch(()=>null)
          )
        );
        const good = results.find(x=>x&&x.d&&x.d.description);
        if(good) renderFeaturedFromDaily(good.d, good.code);

        results.filter(Boolean).forEach(({ code, d }) => {
          const card = document.createElement("div");
          card.className = "card-mini";

          let html = `
            <div class="badge"><span class="icon">${signIcon(code)}</span> ${signLabel(code)}</div>
            <div class="mini-line">${d.description || ""}</div>
            <div class="mini-line"><strong>${kvLabel("color")}:</strong> ${d.color || "-"}</div>
            <div class="mini-line"><strong>${kvLabel("mood")}:</strong> ${d.mood || "-"}</div>
          `;

          if (d.paragraph || d.fashion_tip) {
            html += `
              <div class="divider"></div>
              <div class="mini-line">${[d.paragraph, d.fashion_tip].filter(Boolean).join(" ")}</div>
            `;
          }

          card.innerHTML = html;
          sampleCards.appendChild(card);
        });
      }

      function signIcon(code){
        const map = {
          aries:"Ar",
          taurus:"Ta",
          gemini:"Ge",
          cancer:"Ca",
          leo:"Le",
          virgo:"Vi",
          libra:"Li",
          scorpio:"Sc",
          sagittarius:"Sa",
          capricorn:"Cp",
          aquarius:"Aq",
          pisces:"Pi"
        };
        return map[code] || "•";
      }
    </script>
  </body>
</html>
